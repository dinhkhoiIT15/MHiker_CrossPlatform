<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodel="clr-namespace:MHiker_CrossPlatform.ViewModels"
             xmlns:models="clr-namespace:MHiker_CrossPlatform.Models"
             x:DataType="viewmodel:HikeListViewModel"
             x:Class="MHiker_CrossPlatform.Views.HikeListPage"
             Title="All Hikes">

    <Grid RowDefinitions="Auto, *">

        <Button Grid.Row="0" Text="Add New Hike" Margin="10" Command="{Binding GoToAddHikeCommand}" />

        <CollectionView Grid.Row="1" ItemsSource="{Binding Hikes}" SelectionMode="None">
            <CollectionView.ItemTemplate>
                <DataTemplate x:DataType="models:Hike">
                    <Frame Margin="10,5" Padding="16" CornerRadius="8" BorderColor="LightGray" HasShadow="True">
                        <Frame.GestureRecognizers>
                            <TapGestureRecognizer 
                                Command="{Binding Source={RelativeSource AncestorType={x:Type viewmodel:HikeListViewModel}}, Path=GoToEditHikeCommand}"
                                CommandParameter="{Binding .}"/>
                        </Frame.GestureRecognizers>

                        <VerticalStackLayout Spacing="8">

                            <Label Text="{Binding Name}" FontSize="18" FontAttributes="Bold" />

                            <HorizontalStackLayout Spacing="8" VerticalOptions="Center">
                                <Image Source="ic_location.png" WidthRequest="16" HeightRequest="16" />
                                <Label Text="{Binding Location}" FontSize="14" VerticalOptions="Center" />
                            </HorizontalStackLayout>

                            <HorizontalStackLayout Spacing="8" VerticalOptions="Center">
                                <Image Source="ic_date.png" WidthRequest="16" HeightRequest="16" />
                                <Label Text="{Binding DateOfHike, StringFormat='{0:d}'}" FontSize="14" VerticalOptions="Center" />
                            </HorizontalStackLayout>

                        </VerticalStackLayout>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>
    </Grid>

</ContentPage>